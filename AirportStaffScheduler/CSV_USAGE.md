# CSV数据加载使用说明

## 概述

本项目现在支持从CSV文件加载测试数据，而不是硬编码在测试程序中。这样可以更灵活地使用实际数据来测试调度算法。

## CSV文件格式

### 1. staff.csv - 员工数据

CSV文件应包含以下列：
- `员工编号`: 员工的唯一标识符
- `员工姓名`: 员工姓名
- `岗位`: 岗位名称（如"xa内场新人"、"xa配载内场"、"xa装机"等）
- `班组名`: 班组名称（用于装卸调度中的分组）

**示例**：
```csv
"员工编号","员工姓名","员工资质集合","员工班组资质集合","员工资质等级","班组名","岗位","关联人员","人员性别"
"8a69cce499318311019932c0a47f0000","吕劲艺","...","",,"新人组","xa内场新人",,"女"
```

### 2. shift.csv - 班次数据

CSV文件应包含以下列：
- `员工编号`: 员工的唯一标识符
- `班次名称`: 班次名称（如"主班"、"副班"等）

**注意**: 当前CSV文件中可能没有班次数据，系统会使用默认测试数据作为后备。

### 3. task.csv - 任务/航班数据

CSV文件应包含以下列（用于VIP/头等舱调度）：
- `任务名称`: 任务名称
- `任务开始时间`: 任务开始时间（格式：YYYY-MM-DD HH:MM:SS 或 HH:MM）
- `任务时长`: 任务时长（分钟）
- `任务资质要求`: 任务所需资质

或（用于装卸调度）：
- `到达航班ID`: 到达航班的唯一标识符
- `出发航班ID`: 出发航班的唯一标识符
- `到达航班计划到达时间`: 到达时间（格式：YYYY-MM-DD HH:MM:SS）
- `出发航班计划预离时间`: 出发时间（格式：YYYY-MM-DD HH:MM:SS）
- `航班类型`: 航班类型（如"进港"、"出港"、"过站"等）
- `机位`: 机位编号

## 使用方法

### 装卸任务调度测试 (test_load_scheduler.cpp)

1. 确保CSV文件位于 `AirportStaffScheduler/input/` 目录下：
   - `staff.csv`
   - `shift.csv`（可选）
   - `task.csv`

2. 运行测试程序：
   ```bash
   # 使用默认路径（../input/）
   ./test_load_scheduler.exe
   
   # 或指定自定义路径
   ./test_load_scheduler.exe /path/to/csv/files/
   ```

3. 如果CSV文件无法加载，程序会自动使用默认测试数据作为后备。

### VIP/头等舱任务调度测试 (test_task_scheduler.cpp)

（待实现CSV加载功能）

## 数据转换说明

### 资质映射

系统会根据岗位名称自动推断员工的资质：
- 包含"内场"或"配载"的岗位 → 厅内资质 + 前台资质
- 包含"装机"的岗位 → 外场资质
- 默认 → 厅内资质 + 前台资质

### 班组映射

装卸调度中，系统会根据`班组名`字段自动分配装卸组ID：
- 相同班组名的员工会被分配到同一个装卸组
- 组ID按首次出现的顺序自动编号

### 班次类型推断

系统会根据班次名称推断班次类型：
- 包含"主"或"MAIN" → 主班（类型1）
- 包含"副"或"SUB" → 副班（类型2）
- 其他 → 休息（类型0）

## 注意事项

1. CSV文件应使用UTF-8编码
2. 字段值可以用双引号括起来，系统会自动处理
3. 如果CSV文件为空或无法读取，程序会使用硬编码的默认测试数据
4. 时间格式支持：
   - `YYYY-MM-DD HH:MM:SS`（完整格式）
   - `HH:MM`（简化格式）
   - "航后"（表示航后任务，返回-1）

## 文件位置

- CSV数据加载器: `AirportStaffScheduler/CSVDataLoader.h`
- CSV读取工具: `AirportStaffScheduler/CSVReader.h`
- 测试程序: 
  - `AirportStaffScheduler/zhuangxie_class/test_load_scheduler.cpp`
  - `AirportStaffScheduler/vip_first_class_algo/test_task_scheduler.cpp`（待更新）

